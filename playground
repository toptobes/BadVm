imm word PRINTER = 0x400
imm word READER = PRINTER

macro PrintLn reg str =
  | byte RandName(1) = str, 10, 0
  | mov reg, &RandName(1)
  | mov @{word ptr PRINTER}, reg

imm word answer = 16

_start:
    PrintLn(cx, str: "Guess a number in 1..100")
    mov dx, answer

    LoopHead:
        mov cx, @{word ptr READER}
        call closeness
        jmp LoopHead

    Won:
        PrintLn(cx, "You got it!")
        stop
end _start

closeness:
    cmp cx, dx
    jgt GreaterThan
    jlt LessThan

    PrintLn(cx, "You got it!")
    stop

    LessThan:
        PrintLn(cx, "Higher...")
        ret

    GreaterThan:
        PrintLn(cx, "Lower...")
        ret
end closeness
